<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>新增资讯</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">


    <!-- Theme CSS -->
    <link rel="stylesheet" type="text/css" href="../../resource/css/theme.css">
    <link rel="stylesheet" type="text/css" href="../../resource/css/reset.css">
    <link rel="stylesheet" type="text/css" href="../../resource/css/admin.css">
    <!-- Admin Forms CSS -->
    <link rel="stylesheet" type="text/css" href="../../resource/css/admin-forms.css">
    <!--plugin-->
    <link rel="stylesheet" type="text/css" href="../../resource/plugin/wangeditor/css/wangEditor.css">
    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.3.0/respond.min.js"></script>
    <![endif]-->
</head>
<body class="dashboard-page">
<!-- Start: Main -->
<div id="main">
    <!-- Start: Header -->
    <header class="navbar navbar-fixed-top navbar-shadow">
        <div class="navbar-branding">
            <a class="navbar-brand" href="dashboard.html">
                <b>CRM</b>Admin
            </a>
            <span id="toggle_sidemenu_l" class="ad ad-lines"></span>
        </div>
        <ul class="nav navbar-nav navbar-right">
            <li class="dropdown menu-merge">
                <div class="navbar-btn btn-group">
                    <button data-toggle="dropdown" class="btn btn-sm dropdown-toggle">
                        <span class="fa fa-bell-o fs14 va-m"></span>
                        <span class="badge badge-danger">9</span>
                    </button>
                </div>
            </li>
        </ul>
    </header>
    <!-- End: Header -->
    <!-- Start: Sidebar -->
    <aside id="sidebar_left" class="nano nano-light affix">

        <!-- Start: Sidebar Left Content -->
        <div class="sidebar-left-content nano-content">

            <!-- Start: Sidebar Header -->
            <header class="sidebar-header">
                <!-- Sidebar Widget - Author -->
                <div class="sidebar-widget author-widget">
                    <div class="media">
                        <a class="media-left" href="#">
                            <img src="../../resource/images/3.jpg" class="img-responsive">
                        </a>
                        <div class="media-body">
                            <div class="media-links">
                                <span class="sidebar-menu-toggle">刘莉 -</span> <a href="pages_login(alt).html">退出</a>
                            </div>
                            <div class="media-author">Webcome</div>
                        </div>
                    </div>
                </div>
            </header>
            <!-- End: Sidebar Header -->

            <!-- Start: Sidebar Menu -->
            <ul class="nav sidebar-menu">
                <li>
                    <a class="accordion-toggle" href="#">
                        <span class="glyphicon glyphicon-user"></span>
                        <span class="sidebar-title">客户</span>
                        <span class="caret"></span>
                    </a>
                </li>
                <li>
                    <a class="accordion-toggle" href="#">
                        <span class="glyphicon glyphicon-fire"></span>
                        <span class="sidebar-title">资讯</span>
                        <span class="caret"></span>
                    </a>
                    <ul class="nav sub-nav">
                        <li>
                            <a href="admin_plugins-panels.html">
                                <span class="glyphicon glyphicon-book"></span>列表 </a>
                        </li>
                        <li>
                            <a href="admin_plugins-modals.html">
                                <span class="glyphicon glyphicon-modal-window"></span> 资讯标签 </a>
                        </li>
                    </ul>
                </li>

            </ul>
            <!-- End: Sidebar Menu -->
        </div>
        <!-- End: Sidebar Left Content -->

    </aside>
    <!-- End: Sidebar Left -->
    <section id="content_wrapper">
        <!-- Start: Topbar -->
        <header id="topbar" class="alt admin-form">
            <div class="col-md-7"><p class="page-title">新增资讯</p></div>
        </header>
        <!-- End: Topbar -->
        <section id="content" class="table-layout animated fadeIn client_list">
            <div class="tray tray-center">
                <form class="form-horizontal" role="form" id="article_form">
                    <div class="row">
                        <label class="col-md-2 control-label mt10">标题</label>
                        <div class="col-md-6 ml_-35 mt5">
                            <input type="text" id="title" name="title" class="form-control pull-right" placeholder="请输入标题">
                        </div>
                    </div>
                    <div class="row mt10">
                        <label class="col-md-2 control-label mt10">内容</label>
                        <div class="col-md-10 ml_-35" style="min-height: 400px;">
                            <div id="editArticle"  style="min-height: 400px;">

                            </div>
                        </div>
                    </div>
                    <div class="row mt10">
                        <label class="col-md-2 control-label mt10">封面图</label>
                        <div class="col-md-3 ml_-35" >
                            <div class="fileupload fileupload-new admin-form" data-provides="fileupload">
                                <div class="fileupload-preview thumbnail mb20">
                                    <img data-src="holder.js/208x168" src="http://192.168.1.4/images/2016/10/19/2016101914768423891703271.png" alt="holder">
                                </div>
                                <div class="row" style="display: none;">
                                    <div class="col-xs-5">
                                        <span class="button btn-system btn-file btn-block">
                                          <span class="fileupload-new">Select</span>
                                          <span class="fileupload-exists">Change</span>
                                          <input type="file">
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt10">
                        <label class="col-md-2 control-label mt10">标签</label>
                        <div class="col-md-10 ml_-35 mt10" >
                           <span class="article_tag">宏观</span>
                            <span class="article_tag">策略</span>
                        </div>
                    </div>
                    <div class="row mt10">
                        <label class="col-md-2 control-label mt20">自定义标签</label>
                        <div class="col-md-10 ml_-35 mt10" >
                            <div class="new_tags">
                            </div>
                            <div class="row mt10">
                                <div class="col-md-6" >
                                    <input type="text" id="new_tag" class="form-control pull-right" placeholder="请输入自定义标签名">
                                </div>
                                <div class="col-md-2" >
                                    <a class="btn btn-primary" onclick="add_tags()">添加</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="row mt10">

                        <div class="col-md-4 mt10 tr" ><button class="btn btn-lg btn-primary" onclick="submit_article()">提交</button></div>
                    </div>

                </form>

            </div>

        </section>
        <!-- Start: Content-Wrapper -->
    </section>
</div>
<!-- jQuery -->
<script src="../../resource/js/jquery-1.11.1.min.js"></script>
<script src="../../resource/js/jquery_ui/jquery-ui.min.js"></script>
<!-- FileUpload JS -->
<script src="../../resource/plugin/fileupload/fileupload.js"></script>
<script src="../../resource/plugin/holder/holder.min.js"></script>
<script src="../../resource/plugin/wangeditor/js/wangEditor.js"></script>
<!-- Theme Javascript -->
<script src="../../resource/js/utility.js"></script>
<script src="../../resource/js/demo.js"></script>
<script src="../../resource/js/main.js"></script>
<script src="../../resource/js/common.js"></script>
<script src="../resource/js/jquery.validate.js"></script>
<script>
    jQuery(document).ready(function() {
        "use strict";
        // Init Theme Core
        Core.init();
        // Init Demo JS
        Demo.init();
        //初始化编辑器
        var content="";
        var editor = new wangEditor('editArticle');
        editor.config.menus = [
            'bold',
            'underline',
            'italic',
            'strikethrough',
            'eraser',
            'forecolor',
            'quote',
            'fontsize',
            'unorderlist',
            'orderlist',
            'alignleft',
            'aligncenter',
            'alignright',
            'link',
            'unlink',
            'table',
            'img'
        ];
        editor.config.pasteFilter = true;
        editor.config.uploadImgUrl ="${basepath }/fileupload/wangeditor_upload";//图片上传地址
        editor.config.uploadImgFileName = 'file';
        editor.config.uploadParams = {
            attachType: ''
        };
        editor.create();
        //现有标签的选择效果
        $(".article_tag").click(function(){
            var siblings = $(this).siblings();
            if($(this).hasClass("active")){
                $(this).removeClass("active");
            }else{
                for(var i=0;i<siblings.length;i++){
                    $(siblings[i]).removeClass('active');
                }
                $(this).addClass('active');
            }
        });
        $("#article_form").validate({
            rules: {
                title: "required"
            },
            messages: {
                title: "标题不能为空"
            }
        });
    })
    function add_tags(){
        var tag = $("#new_tag").val();
        if(""==tag){
            alert("标签名不能为空");
        }else{
            var tag_ele = " <span class='new_tag article_tag active' onclick = 'remove_tag(this)'>"+tag+"</span>";
            $(".new_tags").append(tag_ele);
            $("#new_tag").val("");
        }
    }
    function remove_tag(targ){
        if(confirm('确定要删除此标签吗？')) {
            $(targ).remove();
        } else {
            return false;
        }

    }
    function submit_article(){
        alert("submit");
        $("#article_form").validate({
            rules: {
                title: "required"
            },
            messages: {
                title: "标题不能为空"
            }
        });
    }
</script>
</body>
</html>